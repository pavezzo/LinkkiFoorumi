{% macro comment_form(post_id, link_id, parent) %}
    {% if parent %}
        <a href="javascript:void(0)" class="replyButton" onclick="showCommentForm(this)" target_id={{ parent }}>Reply</a>
        <form style="display: none;" action="/newcomment" method="post" id={{ parent }}>
            <textarea name="comment" rows="5" cols="40"></textarea>
            <input type="hidden" name="post_id" value={{ post_id }}>
            <input type="hidden" name="link_id" value={{ link_id }}>
            <input type="hidden" name="parent" value={{ parent }}>
            <input type="hidden" name="csrf_token" value={{ session.csrf_token }}><br>
            <button class="btn btn-outline-secondary">Submit</button>
        </form>
    {% else %}
        <a href="javascript:void(0)" class="replyButton" onclick="showCommentForm(this)" target_id="OP">Reply</a>
        <form style="display: none;" action="/newcomment" method="post" id="OP">
            <textarea name="comment" rows="5" cols="40"></textarea>
            <input type="hidden" name="post_id" value={{ post_id }}>
            <input type="hidden" name="link_id" value={{ link_id }}>
            <input type="hidden" name="parent" value={{ comment_id }}>
            <input type="hidden" name="csrf_token" value={{ session.csrf_token }}><br>
            <button class="btn btn-outline-secondary">Submit</button>
        </form>
    {% endif %}
{% endmacro %}

{% macro link(link_id, url, title, comments, likes, subforum) %}
    <div class="link">
        <a href={{ url }}>{{ title }}</a><br>
        {% if subforum %}
        <a href="{{ "/sub/" ~ subforum }}">{{ "Posted on sub/" ~ subforum }}</a><br>
        {% endif %}
        <a href="{{ "/link/"  ~ link_id}}">{{ comments ~ " comments"}}</a><br>
        <p>{{ likes ~ " likes" }}</p><br>
    </div>
{% endmacro %}

{% macro post(post_id, title, comments, likes, subforum) %}
    <div class="post">
        <a href="{{ "/post/" ~ post_id }}">{{ title }}</a><br>
        {% if subforum %}
        <a href="{{ "/sub/" ~ subforum }}">{{ "Posted on sub/" ~ subforum }}</a><br>
        {% endif %}
        <a href="{{ "/post/" ~ post_id }}">{{ comments ~ " comments"}}</a><br>
        <p>{{ likes ~ " likes" }}</p><br>
    </div>
{% endmacro %}

{% macro like(link_id, post_id, comment_id) %}
    <form action="/newlike" method="post" style="float: left;">
        <input type="hidden" name="positive" value=True>
        <input type="hidden" name="link_id" value={{ link_id }}>
        <input type="hidden" name="post_id" value={{ post_id }}>
        <input type="hidden" name="comment_id" value={{ comment_id }}>
        <input type="hidden" name="csrf_token" value={{ session.csrf_token }}>
        <button>upvote</button>
    </form>
    <form action="/newlike" method="post" style="float: left;">
        <input type="hidden" name="positive" value=False>
        <input type="hidden" name="link_id" value={{ link_id }}>
        <input type="hidden" name="post_id" value={{ post_id }}>
        <input type="hidden" name="comment_id" value={{ comment_id }}>
        <input type="hidden" name="csrf_token" value={{ session.csrf_token }}>
        <button>downvote</button>
    </form>
{% endmacro %}